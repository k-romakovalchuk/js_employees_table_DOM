{"version":3,"sources":["scripts/main.js"],"names":["thead","document","querySelector","tbody","tr","querySelectorAll","table","form","createElement","className","insertAdjacentHTML","body","append","pushNotification","title","description","type","div","h2","content","dataset","qa","textContent","setTimeout","remove","addEventListener","e","preventDefault","data","FormData","dataName","get","dataAge","length","newTr","innerHTML","Object","fromEntries","entries","office","toString","replace","asc","saveValue","td","input","defaultValue","headName","value","isNaN","th","target","closest","contains","indexCell","cellIndex","sorted","sort","a","b","sortA","cells","innerText","sortB","localeCompare","item","classList","oldData","rows","style","width","window","getComputedStyle","add","focus","ev","code"],"mappings":"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","file":"main.15ef6323.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\nconst tr = tbody.querySelectorAll('tr');\nconst table = document.querySelector('table');\n\nconst form = document.createElement('form');\n\nform.className = 'new-employee-form';\n\nform.insertAdjacentHTML('beforeend', `\n  <label>Name: <input name=\"name\" type=\"text\" data-qa=\"name\" required></label>\n  <label>Pozition:\n    <input name=\"name\" type=\"text\" data-qa=\"pozition\" required>\n  </label>\n  <label>Office:\n    <select name=\"office\" data-qa=\"office\" required>\n      <option value = \"Tokyo\">Tokyo</option>\n      <option value = \"Singapore\">Singapore</option>\n      <option value = \"London\">London</option>\n      <option value = \"New York\">New York</option>\n      <option value = \"Edinburgh\">Edinburgh</option>\n      <option value = \"San Francisco\">San Francisco</option>\n    </select>\n  </label>\n  <label>Age: <input name=\"age\" type=\"number\" data-qa=\"age\" required></label>\n  <label>Salary:\n    <input name=\"salary\" type=\"number\" data-qa=\"salary\" required>\n  </label>\n  <button>Save to table</button>\n`);\n\ndocument.body.append(form);\n\nconst pushNotification = (title, description, type) => {\n  const div = document.createElement('div');\n  const h2 = document.createElement('h2');\n  const content = document.createElement('p');\n\n  div.className = `notification ${type}`;\n  div.dataset.qa = 'notification';\n  h2.className = 'title';\n  h2.textContent = title;\n  content.textContent = description;\n  div.append(h2, content);\n  document.body.append(div);\n  setTimeout(() => div.remove(), 5000);\n};\n\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const data = new FormData(form);\n  const dataName = data.get('name');\n  const dataAge = data.get('age');\n\n  if ((dataName.length < 5) || (+dataAge > 90\n    || +dataAge < 19)) {\n    return (pushNotification('Ошибка', `Имя должно содержать более 4 \n    символов и возраст должен быть больше 18 и меньше 90 лет`, 'error'));\n  }\n\n  const newTr = document.createElement('tr');\n\n  newTr.innerHTML = `\n    <tr>\n      <td>${data.get('name')}</td>\n      <td>${data.get('pozition')}</td>\n      <td>${Object.fromEntries(data.entries()).office}</td>\n      <td>${data.get('age')}</td>\n      <td>$${data.get('salary').toString()\n    .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}</td>\n    </tr>`;\n  tbody.append(newTr);\n  pushNotification('Рядок додано', ')))))))))))))', 'success');\n});\n\nlet asc = false;\n\nthead.addEventListener('click', (e) => {\n  const th = e.target.closest('th');\n\n  if (!th || !thead.contains(th)) {\n    return;\n  }\n\n  asc = !asc;\n\n  const indexCell = e.target.cellIndex;\n\n  const sorted = [...tr].sort((a, b) => {\n    const sortA = a.cells[indexCell].innerText.replace(/\\$|,/g, '');\n    const sortB = b.cells[indexCell].innerText.replace(/\\$|,/g, '');\n\n    if (asc) {\n      if (isNaN(sortA)) {\n        return sortA.localeCompare(sortB);\n      } else {\n        return sortA - sortB;\n      }\n    } else {\n      if (isNaN(sortB)) {\n        return sortB.localeCompare(sortA);\n      } else {\n        return sortB - sortA;\n      }\n    }\n  });\n\n  tbody.append(...sorted);\n});\n\ntbody.addEventListener('click', (e) => {\n  const item = e.target.closest('tr');\n\n  for (const i of tr) {\n    i.classList.remove('active');\n  }\n  item.className = 'active';\n});\n\nfunction saveValue(td, input, defaultValue, headName) {\n  switch (true) {\n    case !input.value:\n    case defaultValue.length === 2 && isNaN(+input.value):\n    case defaultValue.length === 2\n      && (+input.value < 18 || +input.value > 90):\n    case isNaN(+defaultValue.replace(/(^\\$)|,/g, ''))\n    && input.value.length < 4:\n    case !isNaN(+defaultValue.replace(/(^\\$)|,/g, ''))\n    && isNaN(+input.value.replace(/(^\\$)|,/g, '')):\n    case isNaN(+defaultValue.replace(/(^\\$)|,/g, ''))\n    && !isNaN(+input.value.replace(/(^\\$)|,/g, '')):\n      td.textContent = defaultValue;\n      break;\n    case (headName === 'Salary'):\n      td.textContent = input.value.toString()\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n      break;\n\n    default:\n      td.textContent = input.value;\n  }\n}\n\ntbody.addEventListener('dblclick', (e) => {\n  const td = e.target;\n  const defaultValue = td.textContent;\n  const headName = table.rows[0].cells[td.cellIndex].textContent;\n  let oldData;\n  let input;\n\n  if (headName === 'Office') {\n    input = document.createElement('select');\n\n    oldData = td.innerHTML;\n    td.innerHTML = '';\n\n    input.insertAdjacentHTML('afterbegin', `\n      <select data-qa=\"office\" name=\"office\">\n        <option value = \"Tokyo\">Tokyo</option>\n        <option value = \"Singapore\">Singapore</option>\n        <option value = \"London\">London</option>\n        <option value = \"New York\">New York</option>\n        <option value = \"Edinburgh\">Edinburgh</option>\n        <option value = \"San Francisco\">San Francisco</option>\n      </select>\n    `);\n    input.style.width = window.getComputedStyle(e.target).width;\n    input.classList.add('cell-input');\n    input.value = oldData;\n    td.append(input);\n    input.focus();\n  } else {\n    input = document.createElement('input');\n\n    input.style.width = window.getComputedStyle(e.target).width;\n    oldData = td.innerHTML;\n    input.classList.add('cell-input');\n    td.innerHTML = '';\n    input.value = oldData;\n    td.append(input);\n  }\n\n  input.addEventListener('blur', () =>\n    saveValue(td, input, defaultValue, headName));\n\n  input.addEventListener('keydown', (ev) => {\n    if (ev.code === 'Enter') {\n      saveValue(td, input, defaultValue, headName);\n    }\n  });\n});\n"]}